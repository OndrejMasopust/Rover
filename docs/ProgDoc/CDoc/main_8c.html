<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Rover: /Users/Ondra/Documents/Programming/Maturita/Project/AVR/firmware/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Rover
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">school project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('main_8c.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;avr/io.h&gt;</code><br />
<code>#include &lt;avr/iomx8.h&gt;</code><br />
<code>#include &lt;avr/interrupt.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9d19af6b88a98ed8565888aacce26d58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a9d19af6b88a98ed8565888aacce26d58">setUpI2C</a> (void)</td></tr>
<tr class="separator:a9d19af6b88a98ed8565888aacce26d58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3589b4c79856dc4fb777deaacd4b07ec"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a3589b4c79856dc4fb777deaacd4b07ec">i2cStatus</a> (void)</td></tr>
<tr class="separator:a3589b4c79856dc4fb777deaacd4b07ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ef815f715627c1822d90cd2b6620dd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a1ef815f715627c1822d90cd2b6620dd9">setUpADC</a> (void)</td></tr>
<tr class="separator:a1ef815f715627c1822d90cd2b6620dd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5d682b8def1d7ac4d96ae2699d6784f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aa5d682b8def1d7ac4d96ae2699d6784f">adcStartConversion</a> (void)</td></tr>
<tr class="separator:aa5d682b8def1d7ac4d96ae2699d6784f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a474f42eedbdc093683fdb4b88be3c48f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a474f42eedbdc093683fdb4b88be3c48f">ISR</a> (TWI_vect)</td></tr>
<tr class="separator:a474f42eedbdc093683fdb4b88be3c48f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c2e5b588ced1cd7312f5b0edc5b295"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a05c2e5b588ced1cd7312f5b0edc5b295">ISR</a> (ADC_vect)</td></tr>
<tr class="separator:a05c2e5b588ced1cd7312f5b0edc5b295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abb9c7870dd905570f1e119d482391a41"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#abb9c7870dd905570f1e119d482391a41">sensorValues</a> [2]</td></tr>
<tr class="separator:abb9c7870dd905570f1e119d482391a41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63cc080a75adf190fd50c1e9c7a1368c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a63cc080a75adf190fd50c1e9c7a1368c">sentCounter</a> = 0</td></tr>
<tr class="separator:a63cc080a75adf190fd50c1e9c7a1368c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa5d682b8def1d7ac4d96ae2699d6784f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5d682b8def1d7ac4d96ae2699d6784f">&#9670;&nbsp;</a></span>adcStartConversion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adcStartConversion </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When the <a class="el" href="main_8c.html#aa5d682b8def1d7ac4d96ae2699d6784f">adcStartConversion()</a> function is called, a logic 1 is written to the ADSC bit in the ADCSRA register and new analog-digital conversion is started. </p>

</div>
</div>
<a id="a3589b4c79856dc4fb777deaacd4b07ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3589b4c79856dc4fb777deaacd4b07ec">&#9670;&nbsp;</a></span>i2cStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t i2cStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="main_8c.html#a3589b4c79856dc4fb777deaacd4b07ec">i2cStatus()</a> function returns prescaled current state of the I2C.</p>
<dl class="section return"><dt>Returns</dt><dd>byte containing the status </dd></dl>

</div>
</div>
<a id="a474f42eedbdc093683fdb4b88be3c48f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a474f42eedbdc093683fdb4b88be3c48f">&#9670;&nbsp;</a></span>ISR() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">TWI_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This interrupt service routine is called when the TWI vector is set. It sends the appropriate data through the I2C and starts new conversion after all. </p>

</div>
</div>
<a id="a05c2e5b588ced1cd7312f5b0edc5b295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05c2e5b588ced1cd7312f5b0edc5b295">&#9670;&nbsp;</a></span>ISR() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">ADC_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This interrupt service routine is called when the ADC vector is set. It stores the converted value, switches the ADC input to the other sensor and invokes new conversion if needed. </p>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The main function. It sets everything up, starts first AD conversino and then just hangs in an endless while loop. </p>

</div>
</div>
<a id="a1ef815f715627c1822d90cd2b6620dd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ef815f715627c1822d90cd2b6620dd9">&#9670;&nbsp;</a></span>setUpADC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setUpADC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="main_8c.html#a1ef815f715627c1822d90cd2b6620dd9">setUpADC()</a> function is called at the beginning of the program and sets up everything around the analog-gigital conversion. </p>

</div>
</div>
<a id="a9d19af6b88a98ed8565888aacce26d58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d19af6b88a98ed8565888aacce26d58">&#9670;&nbsp;</a></span>setUpI2C()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setUpI2C </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="main_8c.html#a9d19af6b88a98ed8565888aacce26d58">setUpI2C()</a> function is called at the beginning of the program and sets up everything around the I2C. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="abb9c7870dd905570f1e119d482391a41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb9c7870dd905570f1e119d482391a41">&#9670;&nbsp;</a></span>sensorValues</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t sensorValues[2]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An array of 2-byte variables that hold the sensor output values.<br />
 The value under [0] is from the sensor that measures the shorter distances.<br />
 The value under [1] is from the sensor that measures the larger distances. </p>

</div>
</div>
<a id="a63cc080a75adf190fd50c1e9c7a1368c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63cc080a75adf190fd50c1e9c7a1368c">&#9670;&nbsp;</a></span>sentCounter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sentCounter = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A counter, that counts what has been sent over I2C. Base on that, next data is sent. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_cf80e0f1b700013cac37ec0a8d7c2b9c.html">AVR</a></li><li class="navelem"><a class="el" href="dir_1029dc254817850212b87c2b1ead95f1.html">firmware</a></li><li class="navelem"><a class="el" href="main_8c.html">main.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
